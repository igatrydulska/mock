
//setting the variables for weather
let weatherjson = false;
let day = 1;
let month = 12;
let year = 2022;
let currentDate = 27-11-2022;
let url;


let img;
let img1;

img = loadImage('niebo.jpg');
img1 = loadImage('niebo2.jpg');



//ensuring that both the picture and the weather API run smoothly; 
//creating a source for the weather API data

function preload() { // Calling loadJSON() inside preload() guarantees to complete the operation before setup() and draw() are called.
  var date = new Date();
  let day = String(date.getDate()-5);
  let month = String(date.getMonth() + 1);
  let year = date.getFullYear();
  let currentDate = `${year}-${month}-${day}`;
  let newUrl = "https://archive-api.open-meteo.com/v1/era5?latitude=51.5002&longitude=-0.1262" //Barcelona's localisation is 41.3874째 N, 2.1686째 E
  newUrl += `&start_date=${currentDate}&end_date=${currentDate}&daily=temperature_2m_max&timezone=auto`
  weatherjson = loadJSON(newUrl);
}

//creating default set-up
  


function setup() {
  createCanvas(displayWidth, displayHeight);
  //background(10) //I think this is what was blocking pictures
  setInterval(preload, 1000 * 60 * 60 * 24); //update the weather every day
  img = loadImage('niebo.jpg');
  img1 = loadImage('niebo2.jpg');
}

//setting new variables - for display
let constant = 2;
let temp = weatherjson.daily.temperature_2m_max;
let temp2 = Number(temp);


function draw() {
  background(10);
  if (weatherjson === false) return;
  let constant = 2;
  let temp = weatherjson.daily.temperature_2m_max;
  let temp2 = Number(temp); // this will be the variable on which the brightness of the picture of the left will depend on
  temp2 = int(random(temp2+2, temp2+6)); // this will be the variable on which the brightness of the picture on the right will depend on;
  // 2 and 6 because this is the prognosis for the air temperature rise in Barcelona is the interval 2 - 6;
  for (let x = 0; x < img1.width; x++) {
  for (let y = 0; y < img1.height; y++) {
  }
  img1.updatePixels();

}

function draw () {
image(img, 130, 200, 400, 400);
image(img1, 760, 200, 400, 400);

text("current temperature = " + temp + "째C", 300, 190);
text("temperature in the future = " + temp2 + "째C", 960, 190);
}





